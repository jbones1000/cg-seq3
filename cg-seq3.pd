#N canvas 665 50 799 676 10;
#X obj 47 643 outlet;
#N canvas 11 50 867 431 latch 0;
#X text 482 130 THE LATCH!;
#X msg 523 237 1;
#X msg 555 237 0;
#X obj 428 95 inlet;
#X obj 428 313 outlet;
#X obj 523 192 sel 4;
#X obj 555 212 t b;
#N canvas 8 50 759 486 latch-notes 0;
#N canvas 1010 59 817 631 latcher 0;
#X obj 220 378 bag;
#X msg 317 311 flush;
#X obj 169 81 t a a, f 17;
#X obj 285 257 t a b;
#X obj 169 44 inlet;
#X obj 285 475 outlet;
#X obj 443 58 inlet;
#X obj 285 126 stripnote;
#X obj 285 228 pack, f 9;
#X obj 443 142 t b;
#X obj 169 103 unpack;
#X obj 169 156 swap;
#X obj 169 198 pack;
#X obj 169 220 route 0;
#X obj 220 400 pack 1 0;
#X obj 169 241 pack 0 100;
#X connect 0 0 14 0;
#X connect 1 0 0 0;
#X connect 2 0 10 0;
#X connect 2 1 7 0;
#X connect 3 0 5 0;
#X connect 3 1 1 0;
#X connect 4 0 2 0;
#X connect 6 0 9 0;
#X connect 7 0 8 0;
#X connect 7 1 8 1;
#X connect 8 0 3 0;
#X connect 9 0 1 0;
#X connect 10 0 11 0;
#X connect 10 1 11 1;
#X connect 11 0 12 0;
#X connect 11 1 12 1;
#X connect 12 0 13 0;
#X connect 13 0 15 0;
#X connect 14 0 5 0;
#X connect 15 0 0 0;
#X restore 43 413 pd latcher;
#X obj 173 298 spigot 1;
#X obj 43 298 spigot 0;
#X obj 226 272 == 0;
#X obj 193 134 inlet;
#X obj 43 626 outlet;
#X obj 43 106 inlet;
#X text 241 135 bang enable / disables latch;
#X text 44 53 incoming notes get sent through latch if enabled \, or
directly to output if disabled;
#X obj 309 298 b;
#X obj 193 159 t f f b, f 17;
#X connect 0 0 5 0;
#X connect 1 0 5 0;
#X connect 2 0 0 0;
#X connect 3 0 1 1;
#X connect 4 0 10 0;
#X connect 6 0 2 0;
#X connect 6 0 1 0;
#X connect 9 0 0 1;
#X connect 10 0 2 1;
#X connect 10 1 3 0;
#X connect 10 2 9 0;
#X restore 428 270 pd latch-notes;
#X obj 523 167 r seq3-\$1-actions;
#X connect 1 0 7 1;
#X connect 2 0 7 1;
#X connect 3 0 7 0;
#X connect 5 0 1 0;
#X connect 5 1 6 0;
#X connect 6 0 2 0;
#X connect 7 0 4 0;
#X connect 8 0 5 0;
#X restore 49 135 pd latch;
#N canvas 216 50 1523 881 states 0;
#X obj 226 17 inlet;
#X msg 1180 222 stop;
#X msg 1121 221 0;
#X text 1156 223 =;
#X text 1156 253 =;
#X msg 1121 251 1;
#X msg 1180 252 start;
#X text 1156 283 =;
#X msg 1121 281 2;
#X msg 1180 282 recenable;
#X text 125 516 when something is recorded switch the variable to 3
;
#X text 1156 313 =;
#X msg 1120 311 3;
#X msg 1180 312 record;
#X text 1156 343 =;
#X msg 1120 341 4;
#X msg 1179 341 latch on;
#X text 112 580 latch off is simply in all of these \, eg right outlet
of select;
#X obj 1097 431 r seq3-\$1-actions;
#X obj 1097 453 sel 0 1 2 3 4, f 25;
#X msg 1097 484 0;
#X obj 1186 541 s led;
#X msg 1131 484 3;
#X msg 1165 487 6;
#X msg 1200 487 1;
#X msg 1234 488 4;
#X obj 129 660 r cg-midi-start;
#X obj 129 733 t f f, f 17;
#X obj 129 764 v seq3-\$1-state;
#X obj 245 764 s seq3-\$1-actions;
#X obj 129 682 t b;
#X msg 129 704 1;
#X obj 379 730 t f f, f 17;
#X obj 379 764 v seq3-\$1-state;
#X obj 495 764 s seq3-\$1-actions;
#X obj 379 682 t b;
#X obj 379 659 r cg-midi-stop;
#X msg 379 705 0;
#X text 533 14 the states controlled by the new shortcut approach;
#X obj 226 327 t f f;
#X obj 226 369 v seq3-\$1-state;
#X obj 258 349 s seq3-\$1-actions;
#X text 285 14 Controls State with 0-4;
#X text 341 52 0 stops everything \, 1 is play toggle \, 2 is rec enabled
\, 3 is latch toggle;
#X obj 226 105 sel 0 1 2 3, f 38;
#X obj 291 215 v seq3-\$1-state;
#X msg 226 127 0;
#X msg 291 281 0;
#X msg 365 296 1;
#X msg 357 131 2;
#X obj 423 243 v seq3-\$1-state;
#X obj 423 272 sel 4, f 14;
#X obj 518 301 t b;
#X msg 518 323 4;
#X obj 423 364 t f f;
#X obj 423 406 v seq3-\$1-state;
#X obj 455 386 s seq3-\$1-actions;
#X msg 423 297 0;
#X obj 291 237 sel 1, f 14;
#X obj 365 273 t b;
#X connect 0 0 44 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 19 1 22 0;
#X connect 19 2 23 0;
#X connect 19 3 24 0;
#X connect 19 4 25 0;
#X connect 20 0 21 0;
#X connect 22 0 21 0;
#X connect 23 0 21 0;
#X connect 24 0 21 0;
#X connect 25 0 21 0;
#X connect 26 0 30 0;
#X connect 27 0 28 0;
#X connect 27 1 29 0;
#X connect 30 0 31 0;
#X connect 31 0 27 0;
#X connect 32 0 33 0;
#X connect 32 1 34 0;
#X connect 35 0 37 0;
#X connect 36 0 35 0;
#X connect 37 0 32 0;
#X connect 39 0 40 0;
#X connect 39 1 41 0;
#X connect 44 0 46 0;
#X connect 44 1 45 0;
#X connect 44 2 49 0;
#X connect 44 3 50 0;
#X connect 45 0 58 0;
#X connect 46 0 39 0;
#X connect 47 0 39 0;
#X connect 48 0 39 0;
#X connect 49 0 39 0;
#X connect 50 0 51 0;
#X connect 51 0 57 0;
#X connect 51 1 52 0;
#X connect 52 0 53 0;
#X connect 53 0 54 0;
#X connect 54 0 55 0;
#X connect 54 1 56 0;
#X connect 57 0 54 0;
#X connect 58 0 47 0;
#X connect 58 1 59 0;
#X connect 59 0 48 0;
#X restore 550 169 pd states;
#X obj 550 143 inlet aux;
#X obj 186 200 r seq3-\$1-actions;
#X obj 186 222 sel 2;
#X msg 186 244 1;
#X obj 218 244 t b;
#X msg 218 266 0;
#X obj 49 499 v seq3-\$1-state, f 16;
#X obj 81 477 s seq3-\$1-actions;
#X msg 49 432 3;
#X obj 49 454 t f f;
#X obj 49 221 list prepend notes;
#X obj 376 325 f \$1;
#X obj 225 326 f \$1;
#X obj 376 279 loadbang;
#X obj 225 291 r saveState;
#X msg 158 343 clear;
#X obj 49 401 sel 1, f 6;
#X obj 158 405 text define seq-\$1;
#X obj 49 84 t a a;
#N canvas 8 50 1183 836 countem 0;
#X obj 443 416 s seq3-\$1-count-notes;
#X obj 346 183 inlet;
#X obj 440 380 + 1;
#X msg 402 333 -1;
#X msg 445 333 1;
#X obj 364 303 t b b;
#X obj 364 394 max 0;
#X obj 424 302 t b b;
#X obj 346 205 unpack 0 0;
#X obj 413 231 sel 0;
#X obj 364 372 f 0;
#X floatatom 497 395 5 0 0 0 - - -, f 5;
#X connect 1 0 8 0;
#X connect 2 0 10 1;
#X connect 2 0 0 0;
#X connect 2 0 11 0;
#X connect 3 0 2 1;
#X connect 4 0 2 1;
#X connect 5 0 10 0;
#X connect 5 1 3 0;
#X connect 6 0 2 0;
#X connect 7 0 10 0;
#X connect 7 1 4 0;
#X connect 8 1 9 0;
#X connect 9 0 5 0;
#X connect 9 1 7 0;
#X connect 10 0 6 0;
#X restore 81 109 pd countem;
#X obj 49 161 t a a;
#X obj 81 190 s \$0-pass;
#X obj 49 62 inlet notes, f 17;
#N canvas 66 50 1381 963 quantize 0;
#X floatatom 1125 655 5 0 0 0 - - -, f 5;
#X msg 1113 677 qAmt \$1;
#X obj 138 346 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 93 218 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 728 828 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#N canvas 27 50 1276 860 q 0;
#X obj 396 387 i;
#X obj 396 524 list append;
#X obj 396 546 t a b;
#X obj 396 363 + 0.49999;
#X obj 350 183 inlet;
#X obj 742 486 t a b;
#X obj 804 134 inlet manually set;
#X obj 396 265 text get seq-\$1;
#X obj 396 606 text set seq-\$1;
#X obj 742 546 text set seq-\$1;
#X obj 804 156 + 1;
#X obj 618 615 s length-\$1;
#X obj 396 418 max 2;
#X msg 396 237 0;
#X msg 428 573 0;
#X msg 774 510 0;
#X msg 396 501 0 \$1;
#X msg 742 459 0 \$1;
#X obj 742 412 max 1.1;
#X obj 385 298 unpack 0 0;
#X connect 0 0 12 0;
#X connect 1 0 2 0;
#X connect 2 0 8 0;
#X connect 2 1 14 0;
#X connect 3 0 0 0;
#X connect 4 0 13 0;
#X connect 5 0 9 0;
#X connect 5 1 15 0;
#X connect 6 0 10 0;
#X connect 7 0 19 0;
#X connect 10 0 18 0;
#X connect 12 0 11 0;
#X connect 12 0 16 0;
#X connect 13 0 7 0;
#X connect 14 0 8 1;
#X connect 15 0 9 1;
#X connect 16 0 1 0;
#X connect 17 0 5 0;
#X connect 18 0 11 0;
#X connect 18 0 17 0;
#X connect 19 1 3 0;
#X restore 666 865 pd q just the length(nearest beat);
#X obj 93 458 s \$0-2-seq-player;
#X text 113 216 read raw text;
#X text 171 349 read from quantized text;
#X obj 1051 559 loadbang;
#X msg 901 815 4;
#X obj 256 34 loadbang;
#X obj 138 370 f \$1;
#X obj 93 284 f \$1;
#X msg 93 308 repoint symbol seq-\$1;
#X obj 838 779 cg-quan-the-seq seq-\$1;
#X msg 138 397 repoint symbol seq-\$1-QR;
#X msg 911 838 1;
#X obj 768 129 sel 3;
#X obj 666 226 spigot 0;
#X msg 768 151 1;
#X obj 666 248 t b b;
#X msg 758 239 0;
#X obj 880 746 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 1051 581 25;
#X obj 256 56 f \$2;
#X obj 256 82 sel 0 1 2, f 58;
#X obj 666 582 spigot, f 25;
#X obj 256 104 t b b;
#X msg 302 138 0;
#X obj 666 654 t b b, f 25;
#X obj 838 685 spigot;
#X msg 989 646 setLength \$1;
#X floatatom 989 611 5 0 0 0 - - -, f 5;
#X obj 666 686 spigot;
#X obj 783 456 f;
#X obj 877 644 ==;
#X obj 473 361 f;
#X obj 393 136 t b f f;
#X msg 392 112 1;
#X msg 522 105 0;
#X obj 523 133 t b f b;
#X msg 586 165 1;
#X text 996 38 on load sets the q option;
#X text 998 415 100 ticks per beat;
#X text 1003 442 q to 25 = 16th notes;
#X text 1012 467 q to 100 = quarter notes;
#X text 1027 489 etc...;
#X text 960 799 this still needs some work \, has a maximum amount
of notes than it freezes;
#X text 753 887 this works great;
#X obj 769 106 r seq3-\$1-actions;
#X obj 666 198 r seq3-\$1-doit;
#X connect 0 0 1 0;
#X connect 1 0 15 1;
#X connect 2 0 12 0;
#X connect 3 0 13 0;
#X connect 4 0 5 0;
#X connect 9 0 24 0;
#X connect 10 0 5 1;
#X connect 11 0 25 0;
#X connect 12 0 16 0;
#X connect 13 0 14 0;
#X connect 14 0 6 0;
#X connect 16 0 6 0;
#X connect 17 0 5 1;
#X connect 18 0 20 0;
#X connect 19 0 21 0;
#X connect 20 0 19 1;
#X connect 21 0 27 0;
#X connect 21 1 22 0;
#X connect 22 0 19 1;
#X connect 24 0 1 0;
#X connect 25 0 26 0;
#X connect 26 0 28 0;
#X connect 26 1 39 0;
#X connect 26 2 40 0;
#X connect 27 0 30 0;
#X connect 28 0 13 0;
#X connect 28 1 29 0;
#X connect 29 0 37 0;
#X connect 30 0 34 0;
#X connect 30 1 31 0;
#X connect 31 0 15 0;
#X connect 31 0 23 0;
#X connect 32 0 15 1;
#X connect 33 0 32 0;
#X connect 34 0 5 0;
#X connect 35 0 34 1;
#X connect 35 0 36 0;
#X connect 36 0 31 1;
#X connect 37 0 27 1;
#X connect 38 0 13 0;
#X connect 38 1 35 0;
#X connect 38 2 37 0;
#X connect 39 0 38 0;
#X connect 40 0 41 0;
#X connect 41 0 12 0;
#X connect 41 1 35 0;
#X connect 41 2 42 0;
#X connect 42 0 37 0;
#X connect 50 0 18 0;
#X connect 51 0 19 0;
#X restore 47 553 pd quantize stuff;
#N canvas 120 50 1654 966 play-the-seq 0;
#X obj 342 890 outlet;
#X obj 610 322 r seq3-\$1-actions;
#X obj 433 94 sel 0 1, f 10;
#X obj 433 55 r seq3-\$1-actions;
#X obj 664 373 t b;
#X obj 550 519 s 2-tr-\$0;
#X obj 424 562 r 2-tr-\$0;
#X obj 507 563 r \$0-2-seq-player;
#X obj 611 120 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 496 236 spigot;
#X obj 572 235 spigot;
#X text 638 120 lock start to beat;
#X obj 611 24 loadbang;
#X text 498 848 the sequenced notes can simply be bagged here and when
the loop happens kill note ons. so that when trimming there wont be
any weirdness;
#X obj 374 813 bag;
#X msg 400 781 flush;
#X obj 342 732 t a a;
#X obj 374 835 pack 0 0;
#X obj 610 455 s \$0-flush;
#X obj 400 755 r \$0-flush;
#X obj 342 592 cg-seq-player seq-\$1, f 24;
#X obj 257 818 r \$0-pass;
#X obj 342 670 route note note-off knob, f 53;
#X obj 342 217 r cg-beat-clock;
#X obj 675 199 loadbang;
#X msg 675 256 1;
#N canvas 6 50 1905 999 seq-clocker 0;
#N canvas 12 50 1241 632 clock-control 0;
#X obj 15 63 inlet;
#X obj 297 57 inlet;
#X obj 400 57 inlet;
#X obj 188 432 outlet;
#X obj 516 55 inlet;
#X text 343 58 stop;
#X text 446 58 start;
#X obj 403 442 outlet;
#X text 248 433 beat clock out;
#X text 558 57 start on next beat;
#X obj 695 58 inlet;
#X text 742 57 loop ctrl;
#X obj 836 58 inlet;
#X text 57 60 beat clock in;
#X obj 298 98 bang;
#X obj 398 89 bang;
#X obj 516 85 bang;
#X msg 299 124 0;
#X obj 414 124 t b b;
#X obj 423 322 t b b;
#N canvas 504 264 450 300 wait-for-next-beat 0;
#X obj 109 71 inlet;
#X obj 211 67 inlet;
#X obj 118 215 outlet;
#X obj 114 137 == 1;
#X obj 114 115 i 0;
#X obj 114 162 sel 1;
#X obj 114 184 t b b;
#X msg 166 152 0;
#X msg 203 92 1;
#X connect 0 0 4 0;
#X connect 1 0 8 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 6 0 2 0;
#X connect 6 1 7 0;
#X connect 7 0 4 1;
#X connect 8 0 4 1;
#X restore 386 297 pd wait-for-next-beat;
#X msg 467 360 1;
#X msg 445 156 1;
#X obj 773 437 outlet;
#X text 833 436 spigot control;
#X obj 748 234 spigot 1;
#X obj 798 184 ==;
#X obj 756 271 bang;
#X msg 757 297 0;
#X text 813 234 if loop off \, shut off seq clock output at end;
#X text 883 56 seq end in;
#X text 460 443 seq clock start;
#X obj 40 98 t f f;
#X obj 169 179 <;
#X obj 169 205 sel 1;
#X obj 172 144 t f f;
#X text 212 187 bang on next rollover \, top of beat;
#X connect 0 0 32 0;
#X connect 1 0 14 0;
#X connect 2 0 15 0;
#X connect 4 0 16 0;
#X connect 10 0 26 0;
#X connect 12 0 25 0;
#X connect 14 0 17 0;
#X connect 15 0 18 0;
#X connect 16 0 20 1;
#X connect 17 0 23 0;
#X connect 18 0 7 0;
#X connect 18 1 22 0;
#X connect 19 0 7 0;
#X connect 19 1 21 0;
#X connect 20 0 19 0;
#X connect 21 0 23 0;
#X connect 22 0 23 0;
#X connect 25 0 27 0;
#X connect 26 0 25 1;
#X connect 27 0 28 0;
#X connect 28 0 23 0;
#X connect 32 0 3 0;
#X connect 32 1 35 0;
#X connect 33 0 34 0;
#X connect 34 0 20 0;
#X connect 35 0 33 1;
#X connect 35 1 33 0;
#X restore 211 199 pd clock-control;
#X obj 457 97 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X text 284 22 start;
#X text 347 19 start on next beat;
#X text 531 23 loop;
#X obj 236 342 spigot;
#N canvas 227 50 1124 809 clocker 0;
#X obj 312 332 wrap;
#X floatatom 339 413 5 0 0 0 - - -, f 5;
#X obj 458 134 t b b;
#X obj 453 82 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 936 330 5 0 0 0 - - -, f 5;
#X obj 312 310 - 0;
#X obj 314 215 f;
#X obj 312 355 t f f;
#X obj 273 690 outlet;
#X obj 271 608 + 1;
#X obj 453 53 inlet;
#X obj 993 50 inlet;
#X text 1040 51 length;
#X obj 311 61 inlet;
#X obj 352 688 outlet;
#X text 40 321 derive an internal beat clock from the master by offsetting
phase., f 34;
#X text 392 538 bang at end;
#X obj 332 506 >= 4;
#X obj 312 438 + 0;
#X text 47 609 send out seq clock. for the last value send out 1 cause
if looping this would be where it wraps around., f 33;
#N canvas 4 50 450 300 wait-for-next-tick 0;
#X obj 109 71 inlet;
#X obj 211 67 inlet;
#X obj 118 215 outlet;
#X obj 114 137 == 1;
#X obj 114 115 i 0;
#X obj 114 162 sel 1;
#X obj 114 184 t b b;
#X msg 166 152 0;
#X msg 203 92 1;
#X connect 0 0 4 0;
#X connect 1 0 8 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 6 0 2 0;
#X connect 6 1 7 0;
#X connect 7 0 4 1;
#X connect 8 0 4 1;
#X restore 313 176 pd wait-for-next-tick;
#X text 503 50 start;
#X obj 517 165 t b b;
#X obj 340 536 sel 1 0;
#X obj 290 572 f;
#X obj 312 467 t f f;
#X msg 319 611 1;
#X obj 402 665 s \$0-loop;
#X obj 515 137 r \$0-loop;
#X obj 473 618 f;
#X obj 473 643 - 4;
#X obj 347 248 f;
#X obj 347 281 - 0;
#X obj 345 573 t b b b b;
#X obj 303 103 t f b f f;
#N canvas 80 99 660 336 count-beats 0;
#X obj 175 216 + 1;
#X msg 230 99 0;
#X obj 126 152 <;
#X obj 126 178 sel 1;
#X obj 129 117 t f f;
#X obj 141 219 i 1;
#X text 225 151 when current value is lees than previous value the
phasor rolled over and we increment the beat count.;
#X obj 125 47 inlet;
#X obj 136 269 outlet;
#X obj 303 37 inlet;
#X text 171 44 beat clock in;
#X text 348 38 reset;
#X text 184 271 count;
#X connect 0 0 5 1;
#X connect 1 0 2 1;
#X connect 1 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 2 1;
#X connect 4 1 2 0;
#X connect 5 0 0 0;
#X connect 5 0 8 0;
#X connect 7 0 4 0;
#X connect 9 0 1 0;
#X restore 339 387 pd count-beats;
#X text 443 366 when phasor is reset from a start condition or rollover
\, reset beat counter., f 25;
#X text 356 64 beat clock;
#X obj 473 669 s \$0-overshoot;
#X obj 385 245 r \$0-overshoot;
#X text 87 461 add beat count to beat phase;
#X text 509 244 subtract the overshoot amount from below (the amount
the sequence clock advanced beyond the sequence length);
#X text 555 59 when we start the sequence we want the first output
to be 1 (top of first beat) \, so we wait for next tick.;
#X text 175 701 seq clock out;
#X text 432 704 bang at end of sequence. this gets sent out before
the seq clock. since the sequence clock just loops \, this is useful
for shutting off the output externally (spigot) if you just want a
seuqnce to play once;
#X floatatom 573 670 10 0 0 0 - - -, f 10;
#X text 28 55 this patch takes a 0-1 beat phase clock input and outputs
a sequence clock of arbitrary length that is syncrhonized to the input
clock., f 38;
#X text 29 159 it corrects for overshoot when the clock doesn't exactly
equal the length., f 38;
#X text 593 145 on loop \, the last value (equal to sequence length)
is acutally the top of the next loop \, so we use the previous beat
phase value as the offset.;
#X text 560 597 we can't depend on the sequence clock (which is based
on the input beat phasor) being exactly equal to the sequence length.
so if it advances past the sequence length \, subtract this overshoot
on the next loop to keep everything in sync.;
#X text 29 119 the sequence clock goes from 1 to len+1 and loops continuously
, f 38;
#X connect 0 0 7 0;
#X connect 1 0 18 1;
#X connect 2 0 20 1;
#X connect 2 1 35 1;
#X connect 3 0 2 0;
#X connect 4 0 17 1;
#X connect 4 0 30 1;
#X connect 5 0 0 0;
#X connect 6 0 5 1;
#X connect 7 0 18 0;
#X connect 7 1 35 0;
#X connect 9 0 8 0;
#X connect 10 0 3 0;
#X connect 11 0 4 0;
#X connect 13 0 34 0;
#X connect 17 0 23 0;
#X connect 18 0 25 0;
#X connect 20 0 6 0;
#X connect 22 0 31 0;
#X connect 22 1 35 1;
#X connect 23 0 33 0;
#X connect 23 1 24 0;
#X connect 24 0 9 0;
#X connect 25 0 17 0;
#X connect 25 1 24 1;
#X connect 25 1 29 1;
#X connect 26 0 8 0;
#X connect 28 0 22 0;
#X connect 29 0 30 0;
#X connect 30 0 38 0;
#X connect 30 0 45 0;
#X connect 31 0 32 0;
#X connect 32 0 5 1;
#X connect 33 0 26 0;
#X connect 33 1 14 0;
#X connect 33 2 27 0;
#X connect 33 3 29 0;
#X connect 34 0 5 0;
#X connect 34 1 20 0;
#X connect 34 2 6 1;
#X connect 34 3 31 1;
#X connect 35 0 1 0;
#X connect 39 0 32 1;
#X restore 211 281 pd clocker;
#X obj 420 461 outlet;
#X obj 323 464 outlet;
#X obj 584 63 inlet;
#X text 624 63 length;
#X obj 75 42 inlet;
#X obj 257 238 t b b;
#X obj 360 325 t b b;
#X obj 234 457 outlet;
#X text 180 491 seq clock out;
#X text 312 490 seq starting;
#X text 418 489 seq ended;
#X text 115 44 beat clock;
#X obj 228 50 inlet;
#X obj 284 48 inlet;
#X obj 368 46 inlet;
#X obj 502 45 inlet;
#X text 221 23 stop;
#X text 392 272 the clocker just loops forever. it sends out a bang
at the end of each loop that we can use to shut off its output if we
don't want a looping clock.;
#X obj 395 395 spigot;
#X obj 584 85 - 1;
#X connect 0 0 6 0;
#X connect 0 1 12 0;
#X connect 0 2 5 1;
#X connect 0 2 25 1;
#X connect 1 0 0 4;
#X connect 5 0 14 0;
#X connect 6 0 5 0;
#X connect 6 1 13 0;
#X connect 9 0 26 0;
#X connect 11 0 0 0;
#X connect 12 0 6 1;
#X connect 12 1 8 0;
#X connect 13 0 0 5;
#X connect 13 1 25 0;
#X connect 19 0 0 1;
#X connect 20 0 0 2;
#X connect 21 0 0 3;
#X connect 22 0 1 0;
#X connect 25 0 7 0;
#X connect 26 0 6 2;
#X restore 342 280 pd seq-clocker - - - - - - - - - - - - - - - - -
- - - - - - - -;
#X obj 759 252 r length-\$1;
#X obj 500 133 t b;
#X obj 572 171 ==;
#X obj 507 621 s length-\$1;
#X obj 963 541 r knob1;
#X obj 1069 529 r knob2;
#X obj 1187 533 r knob3;
#X obj 1285 534 r knob4;
#X obj 945 573 f;
#X obj 1051 561 f;
#X obj 1169 564 f;
#X obj 1267 565 f;
#X obj 1267 595 s seq3-\$1-k4;
#X obj 1169 595 s seq3-\$1-k3;
#X obj 1051 600 s seq3-\$1-k2;
#X obj 945 601 s seq3-\$1-k1;
#X obj 1051 477 t b;
#X text 1033 441 bang knobs evey loop to preserve where they are set
too;
#X obj 611 68 sel 0 1 2, f 28;
#X msg 611 90 0;
#X msg 686 97 1;
#X obj 611 46 f \$2;
#X text 723 20 see the quantize stuff for the global quantize options
with arg2;
#X text 823 74 0 = no q at all. 1+2 wait for beat to start seq;
#X text 528 592 play the stores text file;
#X text 728 672 route note ons and offs \, and knobs;
#X floatatom 798 293 5 0 0 0 - - -, f 5;
#X obj 731 478 midiout;
#X msg 731 456 250;
#X text 772 458 tell a MIDI instrument to play;
#X obj 550 407 t b b b b b, f 35;
#X obj 792 433 s seq3-\$1-doit;
#N canvas 6 50 1276 866 auto-knobs 0;
#X obj 435 295 route 1 2 3 4, f 64;
#X obj 435 470 s seq3-\$1-k1;
#X obj 771 398 s seq3-\$1-k4;
#X obj 679 426 s seq3-\$1-k3;
#X obj 547 448 s seq3-\$1-k2;
#X obj 435 181 inlet;
#X text 849 417 <--- drop these as receives in the parent patches knobs!
;
#X connect 0 0 1 0;
#X connect 0 1 4 0;
#X connect 0 2 3 0;
#X connect 0 3 2 0;
#X connect 5 0 0 0;
#X restore 587 701 pd auto-knobs;
#X msg 550 492 1;
#X obj 496 178 t b b;
#X obj 610 345 sel 1 4;
#X connect 1 0 62 0;
#X connect 2 0 28 0;
#X connect 2 1 61 0;
#X connect 2 2 28 0;
#X connect 3 0 2 0;
#X connect 4 0 18 0;
#X connect 6 0 20 1;
#X connect 7 0 20 2;
#X connect 8 0 29 0;
#X connect 8 0 10 1;
#X connect 9 0 26 2;
#X connect 10 0 26 3;
#X connect 12 0 48 0;
#X connect 14 0 17 0;
#X connect 15 0 14 0;
#X connect 16 0 0 0;
#X connect 16 1 14 0;
#X connect 17 0 0 0;
#X connect 19 0 15 0;
#X connect 20 0 22 0;
#X connect 20 1 30 0;
#X connect 21 0 0 0;
#X connect 22 0 16 0;
#X connect 22 1 16 0;
#X connect 22 2 59 0;
#X connect 23 0 26 0;
#X connect 24 0 25 0;
#X connect 25 0 26 4;
#X connect 26 0 20 0;
#X connect 26 1 57 0;
#X connect 26 2 57 0;
#X connect 27 0 26 5;
#X connect 27 0 53 0;
#X connect 28 0 26 1;
#X connect 29 0 9 1;
#X connect 31 0 35 1;
#X connect 32 0 36 1;
#X connect 33 0 37 1;
#X connect 34 0 38 1;
#X connect 35 0 42 0;
#X connect 36 0 41 0;
#X connect 37 0 40 0;
#X connect 38 0 39 0;
#X connect 43 0 35 0;
#X connect 43 0 36 0;
#X connect 43 0 37 0;
#X connect 43 0 38 0;
#X connect 45 0 46 0;
#X connect 45 1 47 0;
#X connect 45 2 47 0;
#X connect 46 0 8 0;
#X connect 47 0 8 0;
#X connect 48 0 45 0;
#X connect 55 0 54 0;
#X connect 57 0 60 0;
#X connect 57 2 43 0;
#X connect 57 3 55 0;
#X connect 57 4 58 0;
#X connect 60 0 5 0;
#X connect 61 0 9 0;
#X connect 61 1 10 0;
#X connect 62 2 4 0;
#X restore 47 609 pd play-the-seq;
#X obj 545 547 r seq3-\$1-actions;
#X floatatom 545 569 5 0 0 0 - - -, f 5;
#X obj 49 299 cg-seq-writer \$1;
#X text 269 21 arg 1: unique number;
#X text 275 45 arg 2: 0 = no length \, and no note q;
#X text 324 64 1 = length q to nearest beat \, no note q;
#X text 324 84 2 = length q to nearest beat and note q to nearest 16th
note;
#X text 171 610 play the recorded sequence;
#X text 186 554 code for length and note quantize;
#X text 549 191 state control;
#X text 173 108 count the incoming notes;
#X text 126 137 latch incoming notes;
#X text 109 172 incoming notes get passed to the outlet;
#X text 589 569 heads up display of states;
#X msg 376 351 read seq-\$1.txt;
#X msg 225 348 write seq-\$1.txt;
#X connect 1 0 23 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 7 0;
#X connect 6 0 30 1;
#X connect 7 0 8 0;
#X connect 8 0 30 1;
#X connect 11 0 12 0;
#X connect 12 0 9 0;
#X connect 12 1 10 0;
#X connect 13 0 30 0;
#X connect 14 0 42 0;
#X connect 15 0 43 0;
#X connect 16 0 14 0;
#X connect 17 0 15 0;
#X connect 18 0 20 0;
#X connect 19 0 11 0;
#X connect 21 0 1 0;
#X connect 21 1 22 0;
#X connect 23 0 13 0;
#X connect 23 1 24 0;
#X connect 25 0 21 0;
#X connect 27 0 0 0;
#X connect 28 0 29 0;
#X connect 30 0 19 0;
#X connect 30 1 18 0;
#X connect 42 0 20 0;
#X connect 43 0 20 0;
